# Full-Stack Mini-Notizblock (React + Node.js + Docker)

This project demonstrates a simple full-stack note-taking application.

*   **Frontend:** React application built with Vite (`vite-project` directory).
*   **Backend:** Node.js Express API (`backend` directory).
*   **Deployment:** Both frontend and backend are containerized using Docker and run as separate containers.

## Project Structure

```
node-container/
├── backend/             # Node.js Express API
│   ├── data/            # (Will be created by the app or manually for bind mount)
│   │   └── notes-data.json # (Generated by the app)
│   ├── node_modules/    # (Generated)
│   ├── package.json
│   ├── package-lock.json
│   ├── server.js        # API logic
│   ├── Dockerfile       # Backend Docker configuration
│   └── .dockerignore
├── vite-project/        # React Frontend
│   ├── dist/            # (Generated build output)
│   ├── node_modules/    # (Generated)
│   ├── public/
│   ├── src/             # Frontend source code
│   ├── .dockerignore
│   ├── .gitignore
│   ├── Dockerfile       # Frontend Docker configuration (Nginx)
│   ├── index.html
│   ├── package.json
│   ├── package-lock.json
│   ├── README.md        # Frontend specific README
│   └── vite.config.js
└── README.md            # This file (Overall project README)
```

## Running the Application with Docker

**Prerequisites:** Docker Desktop installed and running.

**1. Create Data Directory for Backend (for Bind Mount):**

   Before running the backend container with data persistence, create the `data` directory on your host machine if it doesn't exist:
   ```bash
   # Navigate to the project root (node-container)
   mkdir -p backend/data
   ```
   *(On Windows, you might use `mkdir backend\data` in cmd or `New-Item -ItemType Directory -Path backend\data` in PowerShell if it doesn't exist)*

**2. Build the Backend Docker Image:**

   Navigate to the root directory (`node-container`) in your terminal.

   ```bash
   docker build -t mini-notizblock-backend ./backend
   ```

**3. Build the Frontend Docker Image:**

   The frontend needs to know the URL of the backend API *at build time*. Adjust `VITE_API_URL` if your backend will run on a different host port than `8081`.

   ```bash
   docker build -t mini-notizblock-frontend --build-arg VITE_API_URL=http://localhost:8081/api ./vite-project
   ```

**4. Run the Backend Container (with Data Persistence):**

   This command runs the backend container in detached mode (`-d`), maps the host's port (e.g., `8081`) to the container's port `3000` (`-p 8081:3000`), sets the `PORT` environment variable inside the container (`-e PORT=3000`), names the container `backend-api`, and **mounts the local `./backend/data` directory to `/usr/src/app/data` inside the container for data persistence.**

   *Using Git Bash or similar (macOS/Linux):*
   ```bash
   docker run -d -p 8081:3000 -v "$PWD/backend/data:/usr/src/app/data" --name backend-api -e PORT=3000 mini-notizblock-backend
   ```
   *Using Windows Command Prompt (cmd.exe):*
   ```powershell
   docker run -d -p 8081:3000 -v "%CD%\backend\data:/usr/src/app/data" --name backend-api -e PORT=3000 mini-notizblock-backend
   ```
   *Using Windows PowerShell:*
   ```powershell
   docker run -d -p 8081:3000 -v "${PWD}\backend\data:/usr/src/app/data" --name backend-api -e PORT=3000 mini-notizblock-backend
   ```
   You can check backend logs with: `docker logs backend-api`

**5. Run the Frontend Container:**

   This command runs the frontend container in detached mode (`-d`), maps the host's port `8080` to the container's port `80` (where Nginx listens) (`-p 8080:80`), and names the container `frontend-app`.

   ```bash
   docker run -d -p 8080:80 --name frontend-app mini-notizblock-frontend
   ```

**6. Access the Application:**

   Open your web browser and navigate to: [http://localhost:8080](http://localhost:8080)

   The React application should load, and it will make API calls to the backend running at `http://localhost:8081/api`. Notes data will be persisted in the `./backend/data/notes-data.json` file on your host.

**7. Stopping and Removing Containers:**

   ```bash
   docker stop frontend-app backend-api
   docker rm frontend-app backend-api
   ```
   *(Note: Removing the `backend-api` container will NOT delete the `notes-data.json` file if you used a bind mount, as it resides on your host system.)*

## Data Persistence for Backend

For persisting the notes data (`notes-data.json`) generated by the backend API, a **Bind Mount** was chosen for this development environment.

**Reasoning:**

In a development context, direct access to the data file on the host system is often beneficial for quick inspection, debugging, or manual modifications.

*   **Bind Mounts:**
    *   **Pros:**
        *   **Direct Host Access:** The data file (`backend/data/notes-data.json`) is directly accessible and editable on the host machine.
        *   **Simplicity for Development:** Easy to set up and understand for local development workflows. Changes on the host are immediately reflected in the container and vice-versa.
    *   **Cons:**
        *   **Host Path Dependency:** Relies on a specific path existing on the host machine.
        *   **Potential Performance Overhead:** For I/O intensive applications, bind mounts can be slower than named volumes (though negligible for this small JSON file).
        *   **Less Portable:** Docker has less control over the lifecycle of the data compared to named volumes.

*   **Named Volumes (Alternative):**
    *   **Pros:** Managed by Docker, more portable, often better performance, platform-independent.
    *   **Cons:** Data is stored in a Docker-managed location on the host, making direct access for quick edits during development slightly more cumbersome (requires `docker volume inspect` or accessing Docker's internal storage paths).

**Conclusion for Development:** The convenience of direct file access with a Bind Mount outweighs the benefits of a Named Volume for this specific development scenario. For a production environment, a Named Volume would generally be preferred for its robustness and Docker-managed lifecycle.

## Development (Without Docker)

**1. Run Backend:**
   ```bash
   cd backend
   npm install
   npm start
   ```
   (API runs on http://localhost:3000 by default. Data will be stored in `backend/data/notes-data.json`)

**2. Run Frontend:**
   ```bash
   cd ../vite-project
   npm install
   # Ensure VITE_API_URL in App.jsx or .env file points to http://localhost:3000/api for local backend
   npm run dev
   ```
   (Frontend runs on http://localhost:5173 by default)

## Configuration

*   **Backend Port:** Configured via the `PORT` environment variable (passed during `docker run` or system environment). Defaults to 3000.
*   **Frontend API URL:** Configured via the `VITE_API_URL` build argument during the `docker build` step for the frontend image. This value is baked into the static frontend files.